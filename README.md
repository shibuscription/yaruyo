# YARUYO

LINE（LIFF）上で動作する、家族向け学習宣言＆記録アプリ。

------------------------------------------------------------------------

## 🧭 概要

YARUYO は、LINE内で動作するモバイルファースト設計の学習トラッカーです。

ユーザーは：

-   やることを宣言する（やるよ）
-   完了を記録する（やったよ）
-   過去のやったよを振り返る
-   通知や表示名を設定する

30分刻み設計・JST基準で統一されたシンプルな構造です。

------------------------------------------------------------------------

## 🛠 技術スタック

-   LIFF（LINE Front-end Framework）
-   Firebase Auth
-   Firestore
-   Cloud Functions（callable + scheduled）
-   Firebase Emulator（ローカル開発用）

------------------------------------------------------------------------

## 💻 ローカル開発

### Firebase Emulator 起動

firebase emulators:start --only auth,firestore,functions

### フロントエンド起動

npx serve .

または VSCode Live Server（推奨）

### ローカルUI確認URL

http://localhost:5500/liff/index.html?mode=local

表示バナー：

Running in emulator mode. Do not use with production credentials.

------------------------------------------------------------------------

## 🔗 URLパラメータ

### 画面切り替え

?view=declare\
?view=record\
?view=stats\
?view=settings

指定時：

-   上部ナビゲーション非表示
-   単画面表示

### ローカルモード

?mode=local

有効化されるもの：

-   Auth Emulator
-   Firestore Emulator
-   Functions Emulator
-   匿名自動ログイン

------------------------------------------------------------------------

## 📱 画面仕様

### 🟢 やるよ

入力項目：

-   いつから
    -   初期値：未定\
    -   30分刻み\
    -   未来のみ選択可\
    -   最終時刻 21:30
-   なにを
    -   ボタン形式（3×2グリッド）
        -   英語 / 数学 / 国語\
        -   理科 / 社会 / その他
-   どのくらい
    -   数値（1〜10）\
    -   単位トグル（時間 / ページ）
        -   初期値：時間\
        -   未選択状態なし
-   内容メモ（任意）

送信ボタン：

やるよ！

------------------------------------------------------------------------

### 🟢 やったよ

フロー：

1.  未完了のやるよが複数 → 選択\
2.  1件のみ → 自動選択\
3.  なし → やるよ画面へ案内

入力項目：

-   メモ（任意）

送信ボタン：

やったよ！

------------------------------------------------------------------------

### 🟢 過去のやったよ

カード表示：

-   ユーザーアイコン
-   表示名
-   教科
-   やるよ：YYYY/MM/DD HH:mm
-   やったよ：YYYY/MM/DD HH:mm
-   評価バッジ（軽め / 予定通り / 多め）

カードクリック → モーダル表示

モーダル構成：

上：やるよ\
- 教科\
- 開始時刻\
- 分量\
- メモ

下：やったよ\
- 完了時刻\
- メモ\
- 評価バッジ

------------------------------------------------------------------------

### 🟢 設定（モーダル）

タイトル行右端の歯車アイコンから表示。

内容：

-   ユーザーアイコン + 表示名 + UID
-   表示名編集
-   やるよ通知
-   やったよ通知
-   開始時刻のリマインドを受け取る（初期値：ON）

Firestore の user プロファイルに保存。

------------------------------------------------------------------------

## 🔔 開始時刻リマインド通知

### 動作仕様

-   30分ごとにスケジュール実行
-   JST基準
-   開始時刻 ±5分の範囲を対象
-   未完了かつ未送信の plan のみ
-   ユーザー設定が ON の場合のみ送信

### 重複防止

plan に以下を追加：

startReminderSentAt

送信成功後に更新。

### メッセージ内容

⏰ やるよの時間です！

{教科} {開始時刻}

そろそろ始めよう。

------------------------------------------------------------------------

## 🔒 設計方針

-   records は client 直書き禁止
-   重要操作は Callable 経由
-   JST統一
-   30分刻み設計
-   単画面スマホ最適化

------------------------------------------------------------------------

## 🚀 本番運用（予定）

-   LIFF + LINEログイン
-   LINEプロフィール取得
-   表示名初期反映
-   LINE通知本番連携

------------------------------------------------------------------------

Built with iteration mindset.
